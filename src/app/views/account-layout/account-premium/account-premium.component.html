<app-preloader *ngIf="isPaying||loading" loadName="In process"/>

<ng-container *ngIf="paypalOrders?.length">
  <h2>Активные подписки</h2>

  <div class="flex">
    <app-card *ngFor="let o of paypalOrders">
      <app-card-body>
        <p>Истекает: {{o.expiresAt|date}}</p>
        <p>План: {{o.paymentPlan}} месяцев</p>
      </app-card-body>
    </app-card>
  </div>

</ng-container>


<h2>Купить подписку</h2>

<!-- todo change to select with variants -->
<div *ngIf="paypalPricePerMonth" class="plans">
  <app-card>
    <app-card-header>
      <div>Подписка на один месяц</div>
      ${{paypalPricePerMonth.sum|number}}
      <div>Без скидки</div>
    </app-card-header>
    <app-card-body>
      <button (click)="payOnServer(System.PayPal, Plans.OneMonth)"
              [disabled]="isPaying" class="btn">
        <svg height="24" style="fill: rgba(255, 255, 255, 1)" viewBox="0 0 24 24" width="24"
             xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19.554 9.488c.121.563.106 1.246-.04 2.051-.582 2.978-2.477 4.466-5.683 4.466h-.442a.666.666 0 0 0-.444.166.72.72 0 0 0-.239.427l-.041.189-.553 3.479-.021.151a.706.706 0 0 1-.247.426.666.666 0 0 1-.447.166H8.874a.395.395 0 0 1-.331-.15.457.457 0 0 1-.09-.363c.061-.373.148-.938.267-1.689.117-.75.206-1.314.267-1.689s.15-.938.272-1.685c.121-.748.212-1.31.271-1.685.033-.248.179-.371.433-.371h1.316c.893.013 1.682-.057 2.375-.211 1.172-.262 2.134-.744 2.886-1.449.685-.637 1.203-1.462 1.56-2.473.162-.47.277-.917.352-1.338.006-.041.014-.066.025-.074.008-.011.022-.014.035-.011a.378.378 0 0 1 .062.035c.524.398.854.941.98 1.632zm-1.728-2.836c0 .717-.154 1.508-.465 2.374-.537 1.562-1.547 2.618-3.037 3.168-.758.269-1.602.408-2.535.425 0 .006-.301.007-.904.007l-.903-.007c-.672 0-1.067.32-1.187.964-.013.053-.298 1.83-.855 5.329-.008.066-.048.102-.121.102H4.854a.473.473 0 0 1-.369-.165.469.469 0 0 1-.115-.39L6.702 3.664a.784.784 0 0 1 .276-.483.785.785 0 0 1 .519-.19h6.014c.228 0 .555.044.979.131.428.084.801.194 1.123.321.718.274 1.266.688 1.645 1.237.379.552.568 1.207.568 1.972z"></path>
        </svg>
        Оплатить через PayPal
      </button>
    </app-card-body>
  </app-card>

  <app-card>
    <app-card-header>
      <div>Подписка на 3 месяца</div>
      ${{((paypalPricePerMonth.sum * Plans.ThreeMonth) * 0.9).toFixed(2)|number}}
      <div>Скидка 10%</div>
    </app-card-header>
    <app-card-body>
      <button (click)="payOnServer(System.PayPal,Plans.ThreeMonth, 10)"
              [disabled]="isPaying" class="btn">
        <svg height="24" style="fill: rgba(255, 255, 255, 1)" viewBox="0 0 24 24" width="24"
             xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19.554 9.488c.121.563.106 1.246-.04 2.051-.582 2.978-2.477 4.466-5.683 4.466h-.442a.666.666 0 0 0-.444.166.72.72 0 0 0-.239.427l-.041.189-.553 3.479-.021.151a.706.706 0 0 1-.247.426.666.666 0 0 1-.447.166H8.874a.395.395 0 0 1-.331-.15.457.457 0 0 1-.09-.363c.061-.373.148-.938.267-1.689.117-.75.206-1.314.267-1.689s.15-.938.272-1.685c.121-.748.212-1.31.271-1.685.033-.248.179-.371.433-.371h1.316c.893.013 1.682-.057 2.375-.211 1.172-.262 2.134-.744 2.886-1.449.685-.637 1.203-1.462 1.56-2.473.162-.47.277-.917.352-1.338.006-.041.014-.066.025-.074.008-.011.022-.014.035-.011a.378.378 0 0 1 .062.035c.524.398.854.941.98 1.632zm-1.728-2.836c0 .717-.154 1.508-.465 2.374-.537 1.562-1.547 2.618-3.037 3.168-.758.269-1.602.408-2.535.425 0 .006-.301.007-.904.007l-.903-.007c-.672 0-1.067.32-1.187.964-.013.053-.298 1.83-.855 5.329-.008.066-.048.102-.121.102H4.854a.473.473 0 0 1-.369-.165.469.469 0 0 1-.115-.39L6.702 3.664a.784.784 0 0 1 .276-.483.785.785 0 0 1 .519-.19h6.014c.228 0 .555.044.979.131.428.084.801.194 1.123.321.718.274 1.266.688 1.645 1.237.379.552.568 1.207.568 1.972z"></path>
        </svg>
        Оплатить через PayPal
      </button>
    </app-card-body>
  </app-card>

  <app-card>
    <app-card-header>
      <div>Подписка на 6 месяцев</div>
      ${{((paypalPricePerMonth.sum * Plans.SixMonth) * 0.8).toFixed(2)|number}}
      <div>Скидка 20%</div>
    </app-card-header>
    <app-card-body>
      <button (click)="payOnServer(System.PayPal,Plans.SixMonth, 20)"
              [disabled]="isPaying" class="btn">
        <svg height="24" style="fill: rgba(255, 255, 255, 1)" viewBox="0 0 24 24" width="24"
             xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19.554 9.488c.121.563.106 1.246-.04 2.051-.582 2.978-2.477 4.466-5.683 4.466h-.442a.666.666 0 0 0-.444.166.72.72 0 0 0-.239.427l-.041.189-.553 3.479-.021.151a.706.706 0 0 1-.247.426.666.666 0 0 1-.447.166H8.874a.395.395 0 0 1-.331-.15.457.457 0 0 1-.09-.363c.061-.373.148-.938.267-1.689.117-.75.206-1.314.267-1.689s.15-.938.272-1.685c.121-.748.212-1.31.271-1.685.033-.248.179-.371.433-.371h1.316c.893.013 1.682-.057 2.375-.211 1.172-.262 2.134-.744 2.886-1.449.685-.637 1.203-1.462 1.56-2.473.162-.47.277-.917.352-1.338.006-.041.014-.066.025-.074.008-.011.022-.014.035-.011a.378.378 0 0 1 .062.035c.524.398.854.941.98 1.632zm-1.728-2.836c0 .717-.154 1.508-.465 2.374-.537 1.562-1.547 2.618-3.037 3.168-.758.269-1.602.408-2.535.425 0 .006-.301.007-.904.007l-.903-.007c-.672 0-1.067.32-1.187.964-.013.053-.298 1.83-.855 5.329-.008.066-.048.102-.121.102H4.854a.473.473 0 0 1-.369-.165.469.469 0 0 1-.115-.39L6.702 3.664a.784.784 0 0 1 .276-.483.785.785 0 0 1 .519-.19h6.014c.228 0 .555.044.979.131.428.084.801.194 1.123.321.718.274 1.266.688 1.645 1.237.379.552.568 1.207.568 1.972z"></path>
        </svg>
        Оплатить через PayPal
      </button>
    </app-card-body>
  </app-card>

  <app-card>
    <app-card-header>
      <div>Подписка на год</div>
      ${{((paypalPricePerMonth.sum * Plans.OneYear) * 0.7).toFixed(2)|number}}
      <div>Скидка 30%</div>
    </app-card-header>
    <app-card-body>
      <button (click)="payOnServer(System.PayPal,Plans.OneYear, 30)"
              [disabled]="isPaying" class="btn">
        <svg height="24" style="fill: rgba(255, 255, 255, 1)" viewBox="0 0 24 24" width="24"
             xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19.554 9.488c.121.563.106 1.246-.04 2.051-.582 2.978-2.477 4.466-5.683 4.466h-.442a.666.666 0 0 0-.444.166.72.72 0 0 0-.239.427l-.041.189-.553 3.479-.021.151a.706.706 0 0 1-.247.426.666.666 0 0 1-.447.166H8.874a.395.395 0 0 1-.331-.15.457.457 0 0 1-.09-.363c.061-.373.148-.938.267-1.689.117-.75.206-1.314.267-1.689s.15-.938.272-1.685c.121-.748.212-1.31.271-1.685.033-.248.179-.371.433-.371h1.316c.893.013 1.682-.057 2.375-.211 1.172-.262 2.134-.744 2.886-1.449.685-.637 1.203-1.462 1.56-2.473.162-.47.277-.917.352-1.338.006-.041.014-.066.025-.074.008-.011.022-.014.035-.011a.378.378 0 0 1 .062.035c.524.398.854.941.98 1.632zm-1.728-2.836c0 .717-.154 1.508-.465 2.374-.537 1.562-1.547 2.618-3.037 3.168-.758.269-1.602.408-2.535.425 0 .006-.301.007-.904.007l-.903-.007c-.672 0-1.067.32-1.187.964-.013.053-.298 1.83-.855 5.329-.008.066-.048.102-.121.102H4.854a.473.473 0 0 1-.369-.165.469.469 0 0 1-.115-.39L6.702 3.664a.784.784 0 0 1 .276-.483.785.785 0 0 1 .519-.19h6.014c.228 0 .555.044.979.131.428.084.801.194 1.123.321.718.274 1.266.688 1.645 1.237.379.552.568 1.207.568 1.972z"></path>
        </svg>
        Оплатить через PayPal
      </button>
    </app-card-body>
  </app-card>

</div>
